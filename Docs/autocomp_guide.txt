Autocomp 2.3 User’s Guide



1	Copyright	2
2	References	3
3	Acknowledgments	3
4	Description	3
5	Questions and Updates	3
6	Software Specifications	4
6.1	System Requirements	4
6.2	Downloading and Running the Software	4
7	Automated Compositing Algorithm	4
8	Input Files	4
8.1	Original signals	4
8.2	Matched signals	4
8.3	Match file	5
9	Output Files	5
9.1	Composite Table	5
9.2	Composite section	5
9.3	Configuration file	5
9.4	Internal file	5
9.5	Composite tie point files	5
10	Using Autocomp	6
10.1	Getting Started – An example	6
10.2	Graphs	6
10.3	Generating a new composite	6
10.4	Fine-tuning a composite	7
10.4.1 Changing the minimum segment size	7
10.4.2 Merging segments	7
10.4.3 Splitting segments	8
10.4.4 Changing segment selection	8
10.4.5 Moving segment boundaries	8
10.4.6 Updating the composite	8
10.5	Saving and reloading a composite section	8
10.6	Converting from mbsf to composite depth	8

1 Copyright
Autocomp 2.3 Software
Copyright (C) 2003-2006 Lorraine E. Lisiecki
   This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; version 2 of the License.
   This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
   You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
   The original authors reserve the right to license this program or modified versions of this program under other licenses at our discretion. 
   Any questions regarding this license or the operation of this software may be directed to Lorraine Lisiecki <lisiecki@alumni.brown.edu>.

2 References
If you publish results generated by this software please cite the following references:
Lisiecki, L. E, A New Automated Technique for the Construction of More Accurate Composite Depth Scales and an Analysis of Core Deformation in Different Sediment Types, Eos Trans. AGU, 84 (46), Fall Meeting Supplement, Abstract U11B-0010, 2003. 
3 Acknowledgments
   This research used samples and/or data provided by the Ocean Drilling Program (ODP). The ODP is sponsored by the U.S. National Science Foundation (NSF) and participating countries under the management of Joint Oceanographic Institutions (JOI) Inc. Funding for this research was provided by a Schlanger Ocean Drilling Fellowship, which is part of the NSF-sponsored U.S. Science Support Program (USSSP).
4 Description
   This program generates a composite section and a composite depth scale for matched sediment core data from up to four drill holes. The software package Match 2.0 is suggested for aligning the records. 
   The recommended procedure for creating a composite depth section is to use Match 2.0 to align each hole from a drill site to a “target” hole, which has the greatest percent recovery and/or the greatest depth range. The output files from Match 2.0 can then be used as input files for Autocomp. After Autocomp creates a composite section, Match 2.0 can be used again to match each hole to the composite section for easy conversion from meters below sea floor (mbsf) to corrected meters composite depth (cmcd).
5 Questions and Updates
   Any questions regarding this software may be directed to Lorraine Lisiecki <Lisiecki@alumni.brown.edu>. Also send email to this address if you would like to be notified of any updates to the software and to report any bugs that you may discover. Updates will be posted on http://Lorraine-Lisiecki.com.

6 Software Specifications
  6.1 System Requirements
   This software runs on Matlab version 6 through a custom graphical user interface.
  6.2 Downloading and Running the Software
   Autocomp and Match software is available for download from http://Lorraine-Lisiecki.com/match.html . To extract the source files, run "gunzip -dc match-2.3.tgz | tar -xvf -".  To run the program type “autocomp” at the Matlab prompt while Matlab current directory is set to the directory containing the downloaded files.
7 Automated Compositing Algorithm
   The software breaks each aligned record into a series of depth segments. For each depth, it includes a segment from one of the aligned records to be included in the composite section. It chooses from which record to take the segment by avoiding record gaps wherever possible and otherwise selecting the segment which is farthest from any core end and, therefore, least likely to be greatly deformed. The segments from the original, unmatched records are used to generate the composite’s depth scale. These segments are placed end-to-end, and the points matched to the core tops of the target record are assigned the core-top depths. The material between target core tops (the series of original segments) is then stretched or compressed by a single factor to fit between the target core tops.
8 Input Files
All output files are in ASCII text.
  8.1 Original signals
   These data files should contain one of the lithologic measurements made on the cores, with depths given in meters below seafloor (mbsf). Each file should consist of three columns. The first (leftmost) column should contain integer core numbers. The next column of the file should contain the depth of the measurement, and the rightmost column is for the lithologic measurements (e.g. reflectance). Even if multiple lithologic characteristics were used to align the holes with the Match software, only one characteristic is used by this program.
  8.2 Matched signals
   The matched signals should be in the format output by the program Match 2.0, but the filenames may be changed. In these files, each hole should be aligned to a chosen “target” hole. The matched signal files have the format of the original input files, but contain a row of “NaN NaN NaN” at core gaps. The Match program outputs matched versions of each record in files with '.new' appended to the original file name (e.g. the matched version of 'signal.dat' will appear as 'signal.dat.new'). After a final match is generated by Match, it may be desirable to rename these “.new” files to prevent overwriting them during future runs of Match. 
  8.3 Match file
   This file contains a “definition” of the produced match. (Match_gui assigns it the same name as the configuration file, but with a “.match” extension instead of “.conf”.) Four columns give the signal core number, the signal depth, the target core number, and the target depth at every position for which the matching speed (i.e. relative sedimentation rate) changes. These points represent the positions of interval matches generated by the program, not actual data points. Data may be converted from one depth/time scale to the other by linear interpolation between the points in the match file. 
9 Output Files
   When the “Save” button is pressed the program writes four files with the name given in the “Composite Section” text box followed by the extensions “.cds”, “.comp”, “.section”, and .”files”. All output files are in ASCII text.
  9.1 Composite Table
   The file with the extension “.section” is a table that contains all of the information necessary to reconstruct the composite section. The first line of the file gives a polynomial equation to transform from meters composite depth (MCD) to a corrected MCD scale (CMCD), which better agrees with measured MBSF depths. Each subsequent line represents a segment of material from one of the holes and its position in the composite section. The six labeled columns are: hole label, core number, the start and end of the segment in the hole’s mbsf scale, the start depth of the segment in the MCD depth scale, and the start depth of the segment in the CMCD depth scale. The end depth of each segment in MCD and CMCD is the start depth of the following segment. Linear interpolation using the given endpoints will translate each segment from its original MBSF scale to the MCD scale to create the composite section. Then the polynomial equation from the first line can convert the composite section to the CMCD scale.
  9.2 Composite section
   The file with the extension “.cds” contains the new composite section. The first column is depth in the corrected composite depth scale (CMCD) and the second is the lithologic measurement of the segments from the different holes. If the composite section does contain any gaps, they will not be marked in this file. 
  9.3 Configuration file
   The file with the extension “.files” contains the input parameters (i.e. hole labels, filenames, and step size) used in creating the composite section, so that it can be reloaded into Autocomp.
  9.4 Internal file
   The file with the extension “.comp” is a file used by Autocomp to reload a composite section. It contains essentially the same information as the composite table (“.section”). 
  9.5 MCD conversion files
   By clicking “View/Edit MCD” you can view, edit, save, and load files which control the conversion from the MCD depth scale to the corrected composite depth scale (CMCD). The default behavior of Autocomp is to generate the CMCD scale using the best-fit polynomial (up to order 10) for the offset between coretop MBSF and MCD depths. These files have .eqn, .offset, and .mcdtie extensions.
   
10 Using Autocomp
   The compositing program uses a set of files and one parameter value to generate a composite section.  It runs in Matlab version 6 or 7 and is controlled via a user-friendly graphical user interface, from which a user can enter the necessary information, view the output, and make changes if necessary. At the Matlab command prompt, add the directory containing Autocomp to Matlab’s path. The command will be something like “path(path,'c:\cygwin\home\username\Match-2.3\Autocomp')”. Set Matlab’s current directory to the directory that contains your data files. Now to start the program, type “autocomp” at the Matlab prompt. This window will display any warning or error messages that the program generates. As with most programs, it may be wise to save your composite files often in case you accidentally kill the program or lose some of your changes.
  10.1  Getting Started – An example
   A sample composite is included in the Examples directory. First, start Autocomp as described above, setting Matlab’s current directory to the Examples directory. To load the example composite, type “example” in the text box in the upper right of the Autocomp window under the label “Composite Section,” and then click on the button labeled “Load.”  Reflectance data from three holes will appear in the graph on the left, and their composite section will be plotted on the right.
  10.2  Graphs
   The left graph contains plots of the lithologic characteristics from the matched signals. The vertical axis is depth, and the horizontal is the dependent variable with an offset for each hole to reduce overlap. Each signal is plotted in a different shade of black, blue, or green. Hollow circles in the same color as the signal mark the end of each core. Segments selected for inclusion in the composite are highlighted in red, and separated by horizontal dashed lines labeled by numbers. If the “Edit” button is depressed, clicking on these numbers will allow the selected segments to be changed. The scroll bar on the very left of the window allows you to scroll the y-axis of the signal and composite plots. To change the depth range displayed in the windows (i.e., to zoom), change the value in the window labeled “Y-axis height.” 
   
   The right graph contains a plot of the composite section in its new composite depth scale. Changes to the segments in the left graph will not be propagated to this graph until the “Update” button is pressed. When a new composite section is generated, this graph will remain blank until the “Create” button is pressed. Its depth range will automatically follow changes to the depth range of the left window.
  10.3 Generating a new composite
   To create a new composite section from scratch, first match each hole at a site to a target hole. The Match 2.0 software is recommended for this task because it generates files in the correct format. The target hole should ideally have the greatest percent recovery and the greatest length. If the longest hole has unacceptably low recovery, the composite can be created in multiple parts with different target holes. The program accepts a minimum of two holes (including the target) and a maximum of four.
   The letter label of each hole should be entered into the top row of text boxes with the target hole on the left. The filenames of corresponding unmatched (mbsf) data should be entered in the second row of text boxes. (Only one lithologic characteristic can be processed at a time in this software, but this does not reduce the accuracy of the procedure if the matched signals were generated from multi-proxy matches.)  The third row of text boxes is for the filenames of all of the signals that have been aligned to the target hole (Match’s “.new” files), and the last row is for the match files that contain the conversions from each hole’s mbsf to the target’s mbsf (default extension, “.match”).
   The step size is the increment by which the software considers the signals. It defaults to 1.0 meter, but this value can be changed by clicking on the text box and entering a new value. All of the segments generated by the program will be multiples of this step size. However, afterwards segments can be adjusted to any size manually. A small step size will tend to create many switches back and forth between holes, and a larger size will tend to result in larger segments but will make it more difficult for the program to avoid gaps and potentially disturbed material.
   When all of the filenames have been entered and the step size is set, press the button labeled “Create.” Plots of the matched signals and the composite will appear. Enter a filename for your composite, and press “Save.”
   
  10.4  Fine-tuning a composite
   If you are unsatisfied with your automatically generated composite, each segment can be modified individually or you can try creating a new composite with a different step size. The “Edit” button must be depressed in order to manually modify the composite. Changes will not appear in the plot of the composite on the right until the update button is pressed. 
   Autocomp automatically generates a conversion between the MBSF of the composite section, via meters composite depth (MCD), to corrected meters composite depth (CMCD) by finding the best-fit polynomial (up to order 10) for the MBSF and MCD values of core-top depths from all holes. To check or edit this conversion click the “View/Edit MCD” button., which opens a new interactive window. Changes in this window can be uploaded to Autocomp or saved directly. Warning: If you make changes to the composite section, reloading old conversion files will NOT produce accurate results. 
   
10.4.1 Changing the minimum segment size
   To change the segment size increment, enter a new value in the text box labeled “Step size.” This parameter is in the same units as the depth scale (generally meters). To generate a new composite section with this increment, press the “Create” button. This will generate new composite segments, so any modifications made to a pre-existing section will be lost. Therefore, you may wish to save any work that you have done before changing the step size.
10.4.2 Merging segments
   To remove an unwanted segment, make sure that the “Edit” button is depressed and type the number found below the horizontal dashed line that forms the upper bound of the segment into the text box labeled “Delete segment #.” The segment will then be merged with the segment above it, with the material from the hole selected in the upper section highlighted.
10.4.3 Splitting segments
   To insert a new segment, make sure that the “Edit” button is depressed and type the number of the segment that you wish to split into the text box labeled “Insert segment after #.” A new horizontal dashed line will appear one step size below the top of the split segment. If the segment is one step size or smaller, the program will generate an error message. However, you may move the lower boundary of that segment to the desired position and insert a segment into the next segment if it is large enough. The new segment will be labeled with a new number but will still have the same hole highlighted. See below to change which hole is highlighted.
10.4.4 Changing segment selection
   For a given segment, the hole from which material is included in the composite is highlighted in red. To change which hole is highlighted make sure that the “Edit” button is depressed and use the mouse cursor to click on the number of the segment that you wish to change. A set of crosshairs will appear. Center the crosshairs over the plot of the new hole that you wish to be highlighted, and click again. The crosshairs will disappear and the red highlighting of that segment will move to the new hole. Do not click on the hole that is already highlighted because that will move the boundary of segment. If you decide not to change which hole is selected while the crosshairs are up, press the “Enter” key to get rid of the crosshairs.
10.4.5 Moving segment boundaries
   To move a segment boundary, check that the “Edit” button is depressed and click on the number directly below the dashed horizontal line you wish to move. The mouse cursor will change into crosshairs. Place the crosshairs at the desired new depth for the segment boundary and click on the right side of the graph where the other numbers appear. You may also click over the plot of the hole that is highlighted (plotted in red) for the segment below the boundary being moved.
10.4.6 Updating the composite
   Changes to the segments in the left graph will not appear in the plot of the composite on the right until the update button is pressed. Be sure that you have updated the composite before saving your work. The update button uses Autocomp’s default algorithm for converting from MBSF, via meters composite depth (MCD), to corrected meters composite depth (CMCD). To check or edit this conversion click the “View/Edit MCD” button., which opens a new interactive window. Changes in this window can be uploaded to Autocomp or saved directly. Warning: If you make changes to the composite section, reloading old conversion files will NOT produce accurate results. 
10.4.7 Editing the composite depth scale
   The update button uses Autocomp’s default algorithm for converting from MBSF, via meters composite depth (MCD), to corrected meters composite depth (CMCD). To check or edit this conversion click the “View/Edit MCD” button., which opens a new interactive window. Changes in this window can be uploaded to Autocomp or saved directly. Warning: If you make changes to the composite section, reloading old conversion files will NOT produce accurate results. 
   Changes cannot be made in Autocomp and Matlab will not accept command line instructions while this window is open. To return to Autocomp, either press “Okay” to apply your changes or “Cancel” to quit without changing the CMCD conversion of Autocomp. Changes in the settings for CMCD conversion will only take effect when the “Update” button is pressed. This button is only active if some change in the window’s setting has occurred since the last update.
   The points plotted in this window represent the coretops for each hole in the composite, in the same colors as in Autocomp. The y-axis is in the MCD depth scale, which is the cumulative sum of the MBSF depths for each segment in the composite. Due to core expansion, MCD tends to be 5-10% deeper than MBSF. Autocomp models this offset by fitting a polynomial through coretop offsets between MCD and MBSF. Positive offsets mean that the MCD is larger than MBSF, as is most common. The CMCD scale is created by subtracting this modeled offset (plotted as a solid blue of black line) from the MCD of the composite section.  Coretop depths are used because they are the only points at which depth below sea floor is measured directly. The coretop depths will display some scatter due to uncertainties in the measurement of MBSF.  However, errors in matching the holes to the target will also affect coretop offsets, so outliers should be closely examined.
   The model offset can either be a best-fit polynomial or can be linearly interpolated between coretop depths of the target hole. These two options are controlled by radio buttons. When polynomial fit is selected, the order of the polynomial can be set manually or will be automatically determined (up to order 10) if the order window does not contain a number. The polynomial only fits coretop points for the depth range of overlapping holes. After the last non-target coretop, the offset between MCD and CMCD is constant. 
   Target range controls the y-axis of the offset plot and the start value of the range is used when the “MCD start” option is set. Setting the “MCD start” to a fixed value allows the user to control what the offset will be between the MBSF of the target hole and the CMCD at the top of the composite. The “range” and “start” options can also be used to paste together composite sections, for example if one wants to use different target holes for different portions of the composite section. For the lower composite section, set the target range to begin at the desired top MBSF depth of your second target and set the “start” value to the difference between that MBSF depth and the last CMCD of your previous composite section. 
   Save will save files using the entered filename with .eqn, .offset, and .mcdtie extensions (only those files which are checked). Warning: Autocomp uses the same extensions, so this will overwrite a loaded Autocomp composite if the default file name is used. 
   Clear deletes all coretop and other CMCD tie points and sets the modeled offset to zero. Load allows you to read in tie points, modeled offsets, or polynomial equations from a file (either created by this program or text files created by the user). Insert allows you to enter your own tie points between MBSF or MCD and CMCD one-at-a-time. These points will be fit exactly if linear interpolation is selected, otherwise they will be equally weighted with the coretops when the best-fit polynomial is determined. Warning: Be careful when combining user-defined tie points and a manually set CMCD start value.
   
  10.5  Saving and reloading a composite section
   If you made any changes to the automatically generated segments in the graph on the left, press the “Update” button to transfer these changes to the composite. Type a filename to be used for your output files in the textbox labeled “Composite Section” in the upper right, and then press the “Save” button. To reload this data later, type the same filename in the composite section text box and press “Load.” 
  10.6  Converting from MBSF to composite depth
   After Autocomp creates a composite section, Match 2.0 can be used to match each hole to the composite section for easy conversion from meters below sea floor (MBSF) to corrected meters composite depth (CMCD). If you encounter a problem aligning the holes to the composite section, it may indicate a problem with your original interhole alignments or your composite section.



3


